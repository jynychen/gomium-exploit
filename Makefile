.PHONY: all
all: exp

.PHONY: exp
exp: exp.html
	gomium file:///$$(pwd)/exp.html

exp.html: clean exp.go
	@ echo '<script type="text/goscript">' > exp.html
	@ cat exp.go >> exp.html
	@ echo '</script>' >> exp.html

.PHONY: hello
hello: hello.html
	gomium file:///$$(pwd)/hello.html

hello.html: clean hello.go
	@ echo '<script type="text/goscript">' > hello.html
	@ cat hello.go >> hello.html
	@ echo '</script>' >> hello.html

.PHONY: exec
exec: exec.html
	gomium file:///$$(pwd)/exec.html

exec.html: clean exec.go
	@ echo '<script type="text/goscript">' > exec.html
	@ cat exec.go >> exec.html
	@ echo '</script>' >> exec.html

.PHONY: findobj
findobj: build
	@objdump -d exp | grep "syscall.Syscall"
	@rm exp

.PHONY: findpy
findpy: build find.py
	@python find.py
	@rm exp

build: exp.go
	@go build exp.go

.PHONY: clean
clean:
	@rm -f exp
	@rm -f exp.html
	@rm -f exec.html
	@rm -f hello.html